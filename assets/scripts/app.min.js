(function(e){"use strict";var o=window._app||{};o.foundation_init=function(){e(document).foundation()},o.emptyParentLinks=function(){e('.menu li a[href="#"]').click(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1})},o.fixed_nav_hack=function(){e("#offcanvas-nav").on("click","a",function(){e(".off-canvas").foundation("close")}),e(".off-canvas").on("opened.zf.offCanvas",function(){e("header.site-header").addClass("off-canvas-content is-open-right has-transition-push"),e("header.site-header #top-bar-menu .menu-toggle-wrap a#menu-toggle").addClass("clicked")}),e(".off-canvas").on("close.zf.offCanvas",function(){e("header.site-header").removeClass("off-canvas-content is-open-right has-transition-push"),e("header.site-header #top-bar-menu .menu-toggle-wrap a#menu-toggle").removeClass("clicked")}),e(window).on("resize",function(){e(window).width()>1023&&(e(".off-canvas").foundation("close"),e("header.site-header").removeClass("off-canvas-content has-transition-push"),e("header.site-header #top-bar-menu .menu-toggle-wrap a#menu-toggle").removeClass("clicked"))})},o.scroll_to_anchor=function(){const e=0,o=window.location.hash;if(o){const n=document.querySelector(o);if(n){const o=n.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:o,behavior:"smooth"})}}document.querySelectorAll('a[href*="#"]:not([href="#"])').forEach(o=>{o.addEventListener("click",function(o){const n=this.hash.slice(1),t=document.getElementById(n);if(t){o.preventDefault();const a=t.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:a,behavior:"smooth"}),history.pushState(null,null,`#${n}`)}})})},o.display_on_load=function(){e(".display-on-load").css("visibility","visible")},o.mobile_takover_nav=function(){e(document).on("click","a#menu-toggle",function(){e(this).hasClass("clicked")?(e(this).removeClass("clicked"),e("#off-canvas").fadeOut(200)):(e(this).addClass("clicked"),e("#off-canvas").fadeIn(200))})},o.testimonial_slider=function(){const e=document.querySelector(".testimonials-slider");if(!e)return;const o=e.parentElement.parentElement.querySelector(".swiper-button-prev"),n=e.parentElement.parentElement.querySelector(".swiper-button-next"),t=e.parentElement.parentElement.querySelector(".swiper-pagination");new Swiper(e,{loop:!0,pagination:{el:t,clickable:!0},breakpoints:{640:{navigation:{nextEl:n,prevEl:o}}}})},o.autofill_donate_from_plate=function(){console.log("[autofill] init");var o=window.location.pathname.replace(/\/+$/,"");if(console.log("[autofill] pathname:",o),/\/donate$/.test(o)){var n=new URLSearchParams(window.location.search),t=(n.get("plate")||"").trim(),a=(n.get("state")||"").trim();if(console.log("[autofill] query params:",{plate:t,state:a}),t&&a){a=a.toUpperCase(),console.log("[autofill] normalized state:",a);var l=e(".donate-form-vin input"),i=e(".donate-form-year input"),s=e(".donate-form-make input"),r=e(".donate-form-model input");console.log("[autofill] field elements found:",{vin:l.length,year:i.length,make:s.length,model:r.length});var c=function(e){console.log("[autofill] disable fields:",e),[l,i,s,r].forEach(function(o){o.prop("disabled",!!e)})},f=function(e){console.log("[autofill] fill called with:",e),e&&(null!=e.vin&&(l.val(e.vin).trigger("change"),console.log("[autofill] filled vin:",e.vin)),null!=e.year&&(i.val(e.year).trigger("change"),console.log("[autofill] filled year:",e.year)),null!=e.make&&(s.val(e.make).trigger("change"),console.log("[autofill] filled make:",e.make)),null!=e.model&&(r.val(e.model).trigger("change"),console.log("[autofill] filled model:",e.model)))};c(!0),console.log("[autofill] sending AJAX request",{plate:t,state:a}),e.ajax({url:"/wp-json/vehdb/v1/license-decode",method:"GET",dataType:"json",data:{plate:t,state:a},timeout:1e4}).done(function(e){console.log("[autofill] ajax success:",e),e&&!e.error?f(e):console.warn("[autofill] ajax returned error or empty:",e)}).fail(function(e,o,n){console.error("[autofill] ajax failed:",o,n,e)}).always(function(){console.log("[autofill] ajax complete, re-enabling fields"),c(!1)})}else console.log("[autofill] missing plate or state, exiting")}else console.log("[autofill] not a donate page, exiting")},o.init=function(){o.foundation_init(),o.emptyParentLinks(),o.fixed_nav_hack(),o.display_on_load(),o.scroll_to_anchor(),o.testimonial_slider(),o.autofill_donate_from_plate()},e(function(){o.init()})})(jQuery);